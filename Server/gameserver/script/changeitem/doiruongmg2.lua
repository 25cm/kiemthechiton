local tbNpc = Npc:GetClass("doiruongmg2");function tbNpc:OnDialog_1()	local szMsg = "Ta sẽ giúp nhà ngươi đổi <color=yellow>Đồng Thường<color>.";		szMsg = "Cho <color=green>Tinh Thạch Đoạn Hải<color> vào. Tỉ lệ: 1 <color=green>Tinh Thạch Đoạn Hải<color> = 4 <color=yellow>Vạn Đồng Thường<color>.";	Dialog:OpenGift(szMsg, nil, {self.Change, self});end;function tbNpc:Change(tbItemObj)		local number = 0;	for _, pItem in pairs(tbItemObj) do		if (pItem[1].nGenre == 18 and pItem[1].nDetail == 1 and pItem[1].nParticular == 1331 and pItem[1].nLevel == 3) then			--Kiem tra Danh Bo Lenh			number = pItem[1].nCount + number;				end	end	if number < 1 then		me.Msg("Cho <color=green>Tinh Thạch Đoạn Hải<color> vào. Tỉ lệ: 1 <color=green>Tinh Thạch Đoạn Hải<color> = 5 <color=yellow>Vạn Đồng Thường<color>.");		Dialog:Say("Cho <color=green>Tinh Thạch Đoạn Hải<color> vào. Tỉ lệ: 1 <color=green>Tinh Thạch Đoạn Hải<color> = 5 <color=yellow>Vạn Đồng Thường<color>.");		return 0;	else		-- check is Rương		local nCount1 = me.GetItemCountInBags(18, 1, 1331, 3);		if nCount1 == 0 then			Dialog:Say("Bạn phải để <color=green>Tinh Thạch Đoạn Hải<color> trong rương.");			return 0;		end	end	me.ConsumeItemInBags(number, 18, 1, 1331, 3);	local nMG = math.floor(number / 0.25);	me.AddStackItem(18,1,1194,1,nil,nMG);end;